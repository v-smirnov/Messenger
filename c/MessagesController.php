<?phpnamespace VS\Controllers;use VS\Models\MessagesModel;//// Контроллер страницы чтения.//class MessagesController extends SiteController{	private $model;    function __construct()    {        $this->model = MessagesModel::instance();    }	public function actionIndex()    {        $this->content = $this->template('v/v_greeting.php', array());	}    public function actionShowSendingForm()    {        $this->content = $this->template('v/v_sending_form.php', array());    }    public function actionSend()    {        $this->error_msg = '';        if (isset($_POST['title']) && isset($_POST['content'])){            if (($_POST['title'] != '') && ($_POST['content'] != '')){                if (!$this->model->sendMessage($_POST['title'], $_POST['content'])){                    $this->error_msg = 'Не удалось отправить сообщение!';                }            } else {                $this->error_msg = 'Не заполнено название сообщения или его текст!';            }        } else {            $this->error_msg = 'Не удалось определить данные сообщения!';        }        $params = array();        if ($this->error_msg != ''){            $params['error_msg'] = $this->error_msg;        } else {            $params['success_msg'] = 'Сообщение успешно отправлено!';        }        $this->content = $this->template('v/v_sending_form.php', $params);    }    public function actionShowLastMessages()    {        $messages = $this->model->getLast3Messages();        $this->content = $this->template('v/v_messages.php', array('messages' => $messages));    }    public function actionShowLastUnreadMessages()    {        $messages = $this->model->getLast3UnreadMessages();        $this->content = $this->template('v/v_messages.php', array('messages' => $messages));    }    public function actionDeleteMessage()    {        if (isset($_GET['id'])) {            if (!$this->model->deleteMessage($_GET['id'])){                //информируем пользователя, если что-то пошло не так            }        }        if ((isset($_GET['returnPage'])) && ($_GET['returnPage'] !='')) {            header('Location: index.php?act='.$_GET['returnPage']);        } else {            header('Location: index.php?act=ShowLastMessages');        }    }    public function actionMarkMessageAsViewed()    {        if (isset($_GET['id'])) {            if (!$this->model->markMessageAsViewed($_GET['id'])){                //информируем пользователя, если что-то пошло не так            }        }        if ((isset($_GET['returnPage'])) && ($_GET['returnPage'] !='')) {            header('Location: index.php?act='.$_GET['returnPage']);        } else {            header('Location: index.php?act=ShowLastMessages');        }    }}